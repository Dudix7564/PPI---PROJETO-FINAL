<div class="container mt-4">
  <h2 class="mb-4 text-primary fw-bold">
    {{ authService.getUsuario()?.tipo_usuario === 'funcionario' ? 'Gerenciamento de Reservas' : 'Minhas Solicitações' }}
  </h2>

  <div class="card shadow-sm border-0">
    <table class="table table-hover align-middle mb-0" *ngIf="reservas.length > 0">
      <thead class="bg-light text-secondary">
        <tr>
          <th>ID</th>
          <th>Item</th>
          <th class="text-center">Status</th>
          <th>Data</th>
          <th *ngIf="authService.getUsuario()?.tipo_usuario === 'funcionario'" class="text-center">Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let r of reservas">
          <td>{{ r.id_reserva }}</td>
          <td class="fw-bold">{{ r.nome_item }}</td>
          
          <td class="text-center">
            <span [ngClass]="statusClasse(r.status)" class="badge p-2 d-block w-100">
              {{ r.status | uppercase }}
            </span>
          </td>

          <td class="text-muted">{{ r.data_reserva | date:'dd/MM/yyyy' }}</td>

          <td *ngIf="authService.getUsuario()?.tipo_usuario === 'funcionario'" class="text-center">
            <div class="d-flex gap-2 justify-content-center">
              <button class="btn btn-success btn-sm" 
                      (click)="atualizarStatusReserva(r, 'aprovado')"
                      [disabled]="r.status !== 'pendente'">
                Aprovar
              </button>
              <button class="btn btn-danger btn-sm" 
                      (click)="atualizarStatusReserva(r, 'negado')"
                      [disabled]="r.status !== 'pendente'">
                Negar
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>